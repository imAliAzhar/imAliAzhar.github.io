import{g as Et}from"./modules/file-saver-B7oFTzqn.js";function Ft(q,G){for(var A=0;A<G.length;A++){const w=G[A];if(typeof w!="string"&&!Array.isArray(w)){for(const W in w)if(W!=="default"&&!(W in q)){const D=Object.getOwnPropertyDescriptor(w,W);D&&Object.defineProperty(q,W,D.get?D:{enumerable:!0,get:()=>w[W]})}}}return Object.freeze(Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}))}var U={exports:{}};var yt=U.exports,gt;function Pt(){return gt||(gt=1,(function(q){window.setImmediate||(window.setImmediate=(function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||(function(){if(!window.postMessage||!window.addEventListener)return null;var w=[void 0],W="zero-timeout-message",D=function(k){var S=w.length;return w.push(k),window.postMessage(W+S.toString(36),"*"),S};return window.addEventListener("message",function(k){if(!(typeof k.data!="string"||k.data.substr(0,W.length)!==W)){k.stopImmediatePropagation();var S=parseInt(k.data.substr(W.length),36);w[S]&&(w[S](),w[S]=void 0)}},!0),window.clearImmediate=function(k){w[k]&&(w[k]=void 0)},D})()||function(w){window.setTimeout(w,0)}})()),window.clearImmediate||(window.clearImmediate=(function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(w){window.clearTimeout(w)}})()),(function(G){var A=(function(){var o=document.createElement("canvas");if(!o||!o.getContext)return!1;var I=o.getContext("2d");return!(!I||!I.getImageData||!I.fillText||!Array.prototype.some||!Array.prototype.push)})(),w=(function(){if(A){for(var o=document.createElement("canvas").getContext("2d"),I=20,y,e;I;){if(o.font=I.toString(10)+"px sans-serif",o.measureText("Ｗ").width===y&&o.measureText("m").width===e)return I+1;y=o.measureText("Ｗ").width,e=o.measureText("m").width,I--}return 0}})(),W=function(S){if(Array.isArray(S)){var o=S.slice();return o.splice(0,2),o}else return[]},D=function(o){for(var I,y,e=o.length;e;)I=Math.floor(Math.random()*e),y=o[--e],o[e]=o[I],o[I]=y;return o},F={},k=function(o,I){if(!A)return;var y=Math.floor(Math.random()*Date.now());Array.isArray(o)||(o=[o]),o.forEach(function(l,t){if(typeof l=="string"){if(o[t]=document.getElementById(l),!o[t])throw new Error("The element id specified is not found.")}else if(!l.tagName&&!l.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var e={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(I)for(var J in I)J in e&&(e[J]=I[J]);if(typeof e.weightFactor!="function"){var wt=e.weightFactor;e.weightFactor=function(t){return t*wt}}if(typeof e.shape!="function")switch(e.shape){case"circle":default:e.shape="circle";break;case"cardioid":e.shape=function(t){return 1-Math.sin(t)};break;case"diamond":e.shape=function(t){var r=t%(2*Math.PI/4);return 1/(Math.cos(r)+Math.sin(r))};break;case"square":e.shape=function(t){return Math.min(1/Math.abs(Math.cos(t)),1/Math.abs(Math.sin(t)))};break;case"triangle-forward":e.shape=function(t){var r=t%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"triangle":case"triangle-upright":e.shape=function(t){var r=(t+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"pentagon":e.shape=function(t){var r=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(r)+.726543*Math.sin(r))};break;case"star":e.shape=function(t){var r=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-r)+3.07768*Math.sin(2*Math.PI/10-r)):1/(Math.cos(r)+3.07768*Math.sin(r))};break}e.gridSize=Math.max(Math.floor(e.gridSize),4);var n=e.gridSize,ft=n-e.maskGapWidth,K=Math.abs(e.maxRotation-e.minRotation),Q=Math.abs(Math.floor(e.rotationSteps)),V=Math.min(e.maxRotation,e.minRotation),O,b,E,B,j,lt,H;function ut(l,t){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(t-l)+l).toFixed()+"%)"}switch(e.color){case"random-dark":H=function(){return ut(10,50)};break;case"random-light":H=function(){return ut(50,90)};break;default:typeof e.color=="function"&&(H=e.color);break}var Z;typeof e.fontWeight=="function"&&(Z=e.fontWeight);var tt=null;typeof e.classes=="function"&&(tt=e.classes);var et=!1,N=[],rt,dt=function(t){var r=t.currentTarget,a=r.getBoundingClientRect(),s,i;t.touches?(s=t.touches[0].clientX,i=t.touches[0].clientY):(s=t.clientX,i=t.clientY);var f=s-a.left,d=f<0?0:f,v=i-a.top,u=Math.floor(d*(r.width/a.width||1)/n),M=Math.floor(v*(r.height/a.height||1)/n);return N[u]?N[u][M]:null},ct=function(t){var r=dt(t);if(rt!==r){if(rt=r,!r){e.hover(void 0,void 0,t);return}e.hover(r.item,r.dimension,t)}},ht=function(t){var r=dt(t);r&&(e.click(r.item,r.dimension,t),t.preventDefault())},at=[],pt=function(t){if(at[t])return at[t];var r=t*8,a=r,s=[];for(t===0&&s.push([B[0],B[1],0]);a--;){var i=1;e.shape!=="circle"&&(i=e.shape(a/r*2*Math.PI)),s.push([B[0]+t*i*Math.cos(-a/r*2*Math.PI),B[1]+t*i*Math.sin(-a/r*2*Math.PI)*e.ellipticity,a/r*2*Math.PI])}return at[t]=s,s},it=function(){return e.abortThreshold>0&&new Date().getTime()-lt>e.abortThreshold},Mt=function(){return e.rotateRatio===0||Math.random()>e.rotateRatio?0:K===0?V:Q>0?V+Math.floor(Math.random()*Q)*K/(Q-1):V+Math.random()*K},Tt=function(t,r,a,s){var i=e.weightFactor(r);if(i<=e.minSize)return!1;var f=1;i<w&&(f=(function(){for(var st=2;st*i<w;)st+=2;return st})());var d;Z?d=Z(t,r,i,s):d=e.fontWeight;var v=document.createElement("canvas"),u=v.getContext("2d",{willReadFrequently:!0});u.font=d+" "+(i*f).toString(10)+"px "+e.fontFamily;var M=u.measureText(t).width/f,c=Math.max(i*f,u.measureText("m").width,u.measureText("Ｗ").width)/f,m=M+c*2,p=c*3,T=Math.ceil(m/n),P=Math.ceil(p/n);m=T*n,p=P*n;var h=-M/2,g=-c*.4,x=Math.ceil((m*Math.abs(Math.sin(a))+p*Math.abs(Math.cos(a)))/n),C=Math.ceil((m*Math.abs(Math.cos(a))+p*Math.abs(Math.sin(a)))/n),z=C*n,Y=x*n;v.setAttribute("width",z),v.setAttribute("height",Y),u.scale(1/f,1/f),u.translate(z*f/2,Y*f/2),u.rotate(-a),u.font=d+" "+(i*f).toString(10)+"px "+e.fontFamily,u.fillStyle="#000",u.textBaseline="middle",u.fillText(t,h*f,(g+i*.5)*f);var $=u.getImageData(0,0,z,Y).data;if(it())return!1;for(var vt=[],X=C,L,nt,ot,R=[x/2,C/2,x/2,C/2];X--;)for(L=x;L--;){ot=n;t:for(;ot--;)for(nt=n;nt--;)if($[((L*n+ot)*z+(X*n+nt))*4+3]){vt.push([X,L]),X<R[3]&&(R[3]=X),X>R[1]&&(R[1]=X),L<R[0]&&(R[0]=L),L>R[2]&&(R[2]=L);break t}}return{mu:f,occupied:vt,bounds:R,gw:C,gh:x,fillTextOffsetX:h,fillTextOffsetY:g,fillTextWidth:M,fillTextHeight:c,fontSize:i}},xt=function(t,r,a,s,i){for(var f=i.length;f--;){var d=t+i[f][0],v=r+i[f][1];if(d>=b||v>=E||d<0||v<0){if(!e.drawOutOfBound)return!1;continue}if(!O[d][v])return!1}return!0},It=function(t,r,a,s,i,f,d,v,u,M){var c=a.fontSize,m;H?m=H(s,i,c,f,d,M):m=e.color;var p;Z?p=Z(s,i,c,M):p=e.fontWeight;var T;tt?T=tt(s,i,c,M):T=e.classes,o.forEach(function(P){if(P.getContext){var h=P.getContext("2d"),g=a.mu;h.save(),h.scale(1/g,1/g),h.font=p+" "+(c*g).toString(10)+"px "+e.fontFamily,h.fillStyle=m,h.translate((t+a.gw/2)*n*g,(r+a.gh/2)*n*g),v!==0&&h.rotate(-v),h.textBaseline="middle",h.fillText(s,a.fillTextOffsetX*g,(a.fillTextOffsetY+c*.5)*g),h.restore()}else{var x=document.createElement("span"),C="";C="rotate("+-v/Math.PI*180+"deg) ",a.mu!==1&&(C+="translateX(-"+a.fillTextWidth/4+"px) scale("+1/a.mu+")");var z={position:"absolute",display:"block",font:p+" "+c*a.mu+"px "+e.fontFamily,left:(t+a.gw/2)*n+a.fillTextOffsetX+"px",top:(r+a.gh/2)*n+a.fillTextOffsetY+"px",width:a.fillTextWidth+"px",height:a.fillTextHeight+"px",lineHeight:c+"px",whiteSpace:"nowrap",transform:C,webkitTransform:C,msTransform:C,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};m&&(z.color=m),x.textContent=s;for(var Y in z)x.style[Y]=z[Y];if(u)for(var $ in u)x.setAttribute($,u[$]);T&&(x.className+=T),P.appendChild(x)}})},bt=function(t,r,a,s,i){if(!(t>=b||r>=E||t<0||r<0)){if(O[t][r]=!1,a){var f=o[0].getContext("2d");f.fillRect(t*n,r*n,ft,ft)}et&&(N[t][r]={item:i,dimension:s})}},kt=function(t,r,a,s,i,f){var d=i.occupied,v=e.drawMask,u;v&&(u=o[0].getContext("2d"),u.save(),u.fillStyle=e.maskColor);var M;if(et){var c=i.bounds;M={x:(t+c[3])*n,y:(r+c[0])*n,w:(c[1]-c[3]+1)*n,h:(c[2]-c[0]+1)*n}}for(var m=d.length;m--;){var p=t+d[m][0],T=r+d[m][1];p>=b||T>=E||p<0||T<0||bt(p,T,v,M,f)}v&&u.restore()},Ct=function l(t){var r,a,s;Array.isArray(t)?(r=t[0],a=t[1]):(r=t.word,a=t.weight,s=t.attributes);var i=Mt(),f=W(t),d=Tt(r,a,i,f);if(!d||it())return!1;if(!e.drawOutOfBound&&!e.shrinkToFit){var v=d.bounds;if(v[1]-v[3]+1>b||v[2]-v[0]+1>E)return!1}for(var u=j+1,M=function(p){var T=Math.floor(p[0]-d.gw/2),P=Math.floor(p[1]-d.gh/2),h=d.gw,g=d.gh;return xt(T,P,h,g,d.occupied)?(It(T,P,d,r,a,j-u,p[2],i,s,f),kt(T,P,h,g,d,t),!0):!1};u--;){var c=pt(j-u);e.shuffle&&(c=[].concat(c),D(c));var m=c.some(M);if(m)return!0}return e.shrinkToFit?(Array.isArray(t)?t[1]=t[1]*3/4:t.weight=t.weight*3/4,l(t)):!1},_=function(t,r,a){if(r)return!o.some(function(s){var i=new CustomEvent(t,{detail:a||{}});return!s.dispatchEvent(i)},this);o.forEach(function(s){var i=new CustomEvent(t,{detail:a||{}});s.dispatchEvent(i)},this)},St=function(){var t=o[0];if(t.getContext)b=Math.ceil(t.width/n),E=Math.ceil(t.height/n);else{var r=t.getBoundingClientRect();b=Math.ceil(r.width/n),E=Math.ceil(r.height/n)}if(_("wordcloudstart",!0)){B=e.origin?[e.origin[0]/n,e.origin[1]/n]:[b/2,E/2],j=Math.floor(Math.sqrt(b*b+E*E)),O=[];var a,s,i;if(!t.getContext||e.clearCanvas)for(o.forEach(function(h){if(h.getContext){var g=h.getContext("2d");g.fillStyle=e.backgroundColor,g.clearRect(0,0,b*(n+1),E*(n+1)),g.fillRect(0,0,b*(n+1),E*(n+1))}else h.textContent="",h.style.backgroundColor=e.backgroundColor,h.style.position="relative"}),a=b;a--;)for(O[a]=[],s=E;s--;)O[a][s]=!0;else{var f=document.createElement("canvas").getContext("2d");f.fillStyle=e.backgroundColor,f.fillRect(0,0,1,1);var d=f.getImageData(0,0,1,1).data,v=t.getContext("2d").getImageData(0,0,b*n,E*n).data;a=b;for(var u,M;a--;)for(O[a]=[],s=E;s--;){M=n;t:for(;M--;)for(u=n;u--;)for(i=4;i--;)if(v[((s*n+M)*b*n+(a*n+u))*4+i]!==d[i]){O[a][s]=!1;break t}O[a][s]!==!1&&(O[a][s]=!0)}v=f=d=void 0}if(e.hover||e.click){for(et=!0,a=b+1;a--;)N[a]=[];e.hover&&t.addEventListener("mousemove",ct),e.click&&(t.addEventListener("click",ht),t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),t.addEventListener("wordcloudstart",function h(){t.removeEventListener("wordcloudstart",h),t.removeEventListener("mousemove",ct),t.removeEventListener("click",ht),rt=void 0})}i=0;var c,m;e.wait!==0?(c=window.setTimeout,m=window.clearTimeout):(c=window.setImmediate,m=window.clearImmediate);var p=function(g,x){o.forEach(function(C){C.addEventListener(g,x)},this)},T=function(g,x){o.forEach(function(C){C.removeEventListener(g,x)},this)},P=function h(){T("wordcloudstart",h),m(F[y])};p("wordcloudstart",P),F[y]=c(function h(){if(i>=e.list.length){m(F[y]),_("wordcloudstop",!1),T("wordcloudstart",P),delete F[y];return}lt=new Date().getTime();var g=Ct(e.list[i]),x=!_("wordclouddrawn",!0,{item:e.list[i],drawn:g});if(it()||x){m(F[y]),e.abort(),_("wordcloudabort",!1),_("wordcloudstop",!1),T("wordcloudstart",P),delete F[y];return}i++,F[y]=c(h,e.wait)},e.wait)}};St()};k.isSupported=A,k.minFontSize=w,k.stop=function(){if(F)for(var o in F)window.clearImmediate(F[o])},q.exports?q.exports=k:G.WordCloud=k})(yt)})(U)),U.exports}var mt=Pt();const Wt=Et(mt),Rt=Ft({__proto__:null,default:Wt},[mt]);export{Rt as w};
